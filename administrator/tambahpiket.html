<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tambah Petugas Piket - Smart School</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>body { font-family: 'Inter', sans-serif; background-color: #f1f5f9; }</style>
</head>
<body class="text-slate-800">

    <div class="flex h-screen overflow-hidden">
        
        <aside class="w-64 bg-slate-900 text-white hidden md:block p-4">
            <div class="mb-6 font-bold text-xl">Smart School</div>
            <div class="space-y-2">
                <a href="web_dashboard.html" class="block text-slate-400 py-2">Dashboard</a>
                <a href="web_jadwal_piket.html" class="block text-blue-400 bg-slate-800 px-3 py-2 rounded">Jadwal Piket</a>
            </div>
        </aside>

        <div class="flex-1 flex flex-col h-screen overflow-hidden">
            
            <header class="h-16 bg-white shadow-sm flex items-center justify-between px-8 z-10">
                <div class="flex items-center gap-4">
                    <button onclick="history.back()" class="w-8 h-8 rounded-full border border-slate-200 flex items-center justify-center text-slate-500 hover:bg-slate-50">
                        <i class="fa-solid fa-arrow-left"></i>
                    </button>
                    <h2 class="text-xl font-bold text-slate-800">Tambah Tim Piket</h2>
                </div>
            </header>

            <main class="flex-1 overflow-y-auto bg-slate-50 p-8">
                
                <form class="max-w-3xl mx-auto" onsubmit="simpanJadwal(event)">
                    
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                        <h3 class="text-sm font-bold text-blue-600 uppercase mb-4 border-b border-slate-100 pb-2">
                            <i class="fa-solid fa-users-gear mr-2"></i> Konfigurasi Tim Piket
                        </h3>
                        
                        <div class="space-y-6">
                            
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-xs font-bold text-slate-500 mb-1">Hari Bertugas <span class="text-red-500">*</span></label>
                                    <select class="w-full border border-slate-300 rounded-lg p-3 text-sm bg-white font-bold focus:ring-2 focus:ring-blue-500">
                                        <option value="">-- Pilih Hari --</option>
                                        <option value="Senin">Senin</option>
                                        <option value="Selasa">Selasa</option>
                                        <option value="Rabu">Rabu</option>
                                        <option value="Kamis">Kamis</option>
                                        <option value="Jumat">Jumat</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-xs font-bold text-slate-500 mb-1">Jam Operasional</label>
                                    <div class="flex items-center gap-2">
                                        <input type="time" value="07:00" class="w-full border border-slate-300 rounded-lg p-2.5 text-sm">
                                        <span class="text-slate-400 text-xs">s/d</span>
                                        <input type="time" value="15:00" class="w-full border border-slate-300 rounded-lg p-2.5 text-sm">
                                    </div>
                                </div>
                            </div>

                            <hr class="border-slate-100">

                            <div>
                                <label class="block text-xs font-bold text-slate-500 mb-1">Pilih Anggota Tim <span class="text-red-500">*</span></label>
                                <div class="flex gap-2">
                                    <div class="relative flex-1">
                                        <i class="fa-solid fa-magnifying-glass absolute left-3 top-3.5 text-slate-400"></i>
                                        <select id="guruSelect" class="w-full border border-slate-300 rounded-lg p-3 pl-10 text-sm bg-white focus:ring-2 focus:ring-blue-500">
                                            <option value="">-- Cari Nama Guru --</option>
                                            <option value="1">Pak Budi Santoso (Matematika)</option>
                                            <option value="2">Bu Siti Aminah (B. Inggris)</option>
                                            <option value="3">Pak Joko (Olahraga)</option>
                                            <option value="4">Bu Rina (Sejarah)</option>
                                        </select>
                                    </div>
                                    <button type="button" onclick="tambahGuru()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg text-sm font-bold shadow-sm transition flex items-center gap-2">
                                        <i class="fa-solid fa-plus"></i> Tambah
                                    </button>
                                </div>
                                <p class="text-[10px] text-slate-400 mt-1">Pilih guru lalu klik tombol "Tambah" untuk memasukkan ke dalam daftar piket.</p>
                            </div>

                            <div class="bg-slate-50 rounded-xl border border-slate-200 p-4 min-h-[120px]">
                                <p class="text-xs font-bold text-slate-400 mb-2 uppercase tracking-wider">Daftar Petugas Terpilih:</p>
                                
                                <div id="listGuruContainer" class="space-y-2">
                                    <p id="emptyState" class="text-center text-xs text-slate-400 py-4 italic">Belum ada guru yang ditambahkan.</p>
                                    
                                    </div>
                            </div>

                            <div>
                                <label class="block text-xs font-bold text-slate-500 mb-1">Catatan Tim (Opsional)</label>
                                <textarea placeholder="Contoh: Fokus jaga gerbang pagi dan monitoring kantin..." class="w-full border border-slate-300 rounded-lg p-3 text-sm h-16"></textarea>
                            </div>

                        </div>

                        <div class="flex items-center justify-end gap-4 mt-8 pt-4 border-t border-slate-100">
                            <button type="button" onclick="history.back()" class="px-6 py-2.5 rounded-lg border border-slate-300 text-slate-600 font-bold text-sm hover:bg-slate-50 transition">
                                Batal
                            </button>
                            <button type="submit" class="px-6 py-2.5 rounded-lg bg-blue-600 text-white font-bold text-sm hover:bg-blue-700 shadow-lg flex items-center gap-2 transition transform active:scale-95">
                                <i class="fa-solid fa-save"></i> SIMPAN JADWAL
                            </button>
                        </div>

                    </div>
                </form>

            </main>
        </div>
    </div>

    <script>
        function tambahGuru() {
            const select = document.getElementById('guruSelect');
            const container = document.getElementById('listGuruContainer');
            const emptyState = document.getElementById('emptyState');
            
            // Ambil data dari select
            const selectedText = select.options[select.selectedIndex].text;
            const selectedValue = select.value;

            if (!selectedValue) {
                alert("Silakan pilih guru terlebih dahulu!");
                return;
            }

            // Hapus text "Belum ada guru" jika ada
            if (emptyState) emptyState.style.display = 'none';

            // Cegah duplikasi (Simulasi sederhana)
            // Di real app, cek ID array
            
            // Buat Element HTML Baru
            const newItem = document.createElement('div');
            newItem.className = "flex justify-between items-center bg-white p-3 rounded-lg border border-slate-200 shadow-sm transition transform scale-100";
            newItem.innerHTML = `
                <div class="flex items-center gap-3">
                    <div class="w-8 h-8 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold text-xs">
                        <i class="fa-solid fa-user"></i>
                    </div>
                    <div>
                        <p class="text-sm font-bold text-slate-700">${selectedText}</p>
                        <p class="text-[10px] text-slate-500">Anggota Tim</p>
                    </div>
                </div>
                <button type="button" onclick="hapusGuru(this)" class="w-8 h-8 flex items-center justify-center text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-full transition">
                    <i class="fa-solid fa-trash"></i>
                </button>
            `;

            container.appendChild(newItem);

            // Reset Select
            select.value = "";
        }

        function hapusGuru(btn) {
            const item = btn.parentElement;
            item.remove();

            // Cek jika kosong, tampilkan empty state lagi
            const container = document.getElementById('listGuruContainer');
            if (container.children.length === 1) { // 1 karena element emptyState masih ada tapi hidden
                document.getElementById('emptyState').style.display = 'block';
            }
        }

        function simpanJadwal(e) {
            e.preventDefault();
            // Validasi: Cek apakah ada guru yang dipilih
            const container = document.getElementById('listGuruContainer');
            if (container.children.length <= 1 && document.getElementById('emptyState').style.display !== 'none') {
                alert("Harap tambahkan minimal satu guru piket!");
                return;
            }
            alert("Jadwal Tim Piket Berhasil Disimpan!");
            // window.location.href = 'web_jadwal_piket.html';
        }
    </script>

</body>
</html>